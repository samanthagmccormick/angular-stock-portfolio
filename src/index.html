<!doctype html>
<html>

  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="Cache-Control" content="no-cache" />
    <title>Stock Market</title>

    <!-- CSS -->
    <link rel="stylesheet" href="c3/c3.min.css" />
    <link rel="stylesheet" href="/styles/css/base.css" type="text/css" media="screen">
    <link rel="stylesheet" href="bootstrap/dist/css/bootstrap.min.css" type="text/css" media="screen">

    <!-- JS (TODO: compile/minify into 1 file) -->
    <script src="jquery/dist/jquery.min.js"></script>
    <script src="underscore/underscore.js"></script>
    <script src="angular/angular.min.js"></script>
    <script src="angular-ui-router/release/angular-ui-router.min.js"></script>
    <script src="d3/d3.min.js"></script>
    <script src="c3/c3.min.js"></script>
    <script src="ng-polymer-elements/ng-polymer-elements.min.js"></script>
    <script src="bootstrap/dist/js/bootstrap.min.js"></script>

    <!-- JS files-->
    <script src="app.js" type="text/javascript"></script>
  </head>

  <body ng-app="app">

    <menu>
      <a href="#/market">Market</a>
      <a href="#/investor">Investor</a>
      <a href="#/manager">Manager</a>
    </menu>

    <!-- this is where the route below goes-->
    <ui-view></ui-view>

    <!-- Market route -->
    <script type="text/ng-template" id="/market.html">

      <div ng-repeat="myStock in stocks">
        {{myStock.symbol}} {{myStock.price | currency}} {{myStock.quantity}} {{myStock.timestamps}}
        <a ng-click="refresh(stock, $index)">Refresh</a>
      </div>

      <div id="stock-chart">chart!</div>

    </script>


    <!-- Investor route -->
    <script type="text/ng-template" id="/investor.html">
      <h1>Hello {{myInvestor.name}}.</h1>
      <p>You have {{myInvestor.capital | currency}} remaining to
        <strong>make it rain.</strong>
      </p>

      <div>{{marketStatus}}</div>

      <h3>Get a Quote</h3>
      <div ng-repeat="stock in stocks">
        <form>
          <span>{{stock.symbol}}</span>
          <input type="text" ng-model="quantity" placeholder="quantity" ng-change="getQuote(quantity, $index)">
          <span>Quote: {{stock.quote | currency}}</span>
        </form>
      </div>

      <h3>Buy a Stock</h3>
      <h5>Uses your current quote above</h5>
      <form ng-submit="buyStock(symbol, amount)">
        <input type="text" ng-model="symbol" placeholder="Stock ticker"></input>
        <input type="number" ng-model="amount" placeholder="quantity"></input>
        <button type="submit">Buy</button>
      </form>
      <div class="errorMessage">{{errorMessage}}</div>


      <div ng-repeat="quote in quotes | filter:timestamp">
        {{quote.symbol}} {{quote.quote}}
      </div>


      <div ng-repeat="transaction in transactions">
        {{transaction}}
      </div>

      <div>Latest Quote: {{latestQuote}}</div>




    </script>


    <!-- Manager route -->
    <script type="text/ng-template" id="/manager.html">
      {{test}}
    </script>




  </body>

</html>
